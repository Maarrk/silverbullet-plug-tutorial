var mod=(()=>{var c=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var n in t)c(e,n,{get:t[n],enumerable:!0})},b=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of x(t))!h.call(e,i)&&i!==n&&c(e,i,{get:()=>t[i],enumerable:!(o=P(t,i))||o.enumerable});return e};var v=e=>b(c({},"__esModule",{value:!0}),e);var pe={};m(pe,{functionMapping:()=>y});typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var d=new Map,u=0;function a(e){self.postMessage(e)}self.syscall=async(e,...t)=>await new Promise((n,o)=>{u++,d.set(u,{resolve:n,reject:o}),a({type:"sys",id:u,name:e,args:t})});function p(e,t){self.addEventListener("message",n=>{(async()=>{let o=n.data;switch(o.type){case"inv":{let i=e[o.name];if(!i)throw new Error(`Function not loaded: ${o.name}`);try{let s=await Promise.resolve(i(...o.args||[]));a({type:"invr",id:o.id,result:s})}catch(s){console.error("An exception was thrown as a result of invoking function",o.name,"error:",s),a({type:"invr",id:o.id,error:s.message})}}break;case"sysr":{let i=o.id,s=d.get(i);if(!s)throw Error("Invalid request id");d.delete(i),o.error?s.reject(new Error(o.error)):s.resolve(o.result)}break}})().catch(console.error)}),a({type:"manifest",manifest:t})}function w(e){let t=atob(e),n=t.length,o=new Uint8Array(n);for(let i=0;i<n;i++)o[i]=t.charCodeAt(i);return o}function f(e){typeof e=="string"&&(e=new TextEncoder().encode(e));let t="",n=e.byteLength;for(let o=0;o<n;o++)t+=String.fromCharCode(e[o]);return btoa(t)}async function F(e,t){if(typeof e!="string"){let n=new Uint8Array(await e.arrayBuffer()),o=n.length>0?f(n):void 0;t={method:e.method,headers:Object.fromEntries(e.headers.entries()),base64Body:o},e=e.url}return syscall("sandboxFetch.fetch",e,t)}function A(){globalThis.nativeFetch=globalThis.fetch,globalThis.fetch=async function(e,t){let n=t&&t.body?f(new Uint8Array(await new Response(t.body).arrayBuffer())):void 0,o=await F(e,t&&{method:t.method,headers:t.headers,base64Body:n});return new Response(o.base64Body?w(o.base64Body):null,{status:o.status,headers:o.headers})}}A();var l={};m(l,{confirm:()=>K,dispatch:()=>G,downloadFile:()=>O,filterBox:()=>N,flashNotification:()=>I,fold:()=>Y,foldAll:()=>te,getCurrentPage:()=>M,getCursor:()=>k,getSelection:()=>U,getText:()=>S,getUiOption:()=>Q,hidePanel:()=>j,insertAtCursor:()=>z,insertAtPos:()=>q,moveCursor:()=>H,navigate:()=>W,openUrl:()=>L,prompt:()=>J,reloadPage:()=>E,reloadUI:()=>B,replaceRange:()=>_,save:()=>T,setPage:()=>C,setSelection:()=>R,setUiOption:()=>V,showPanel:()=>$,toggleFold:()=>ee,unfold:()=>Z,unfoldAll:()=>re,uploadFile:()=>D,vimEx:()=>X});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});var r=self.syscall;function M(){return r("editor.getCurrentPage")}function C(e){return r("editor.setPage",e)}function S(){return r("editor.getText")}function k(){return r("editor.getCursor")}function U(){return r("editor.getSelection")}function R(e,t){return r("editor.setSelection",e,t)}function T(){return r("editor.save")}function W(e,t,n=!1,o=!1){return r("editor.navigate",e,t,n,o)}function E(){return r("editor.reloadPage")}function B(){return r("editor.reloadUI")}function L(e,t=!1){return r("editor.openUrl",e,t)}function O(e,t){return r("editor.downloadFile",e,t)}function D(e,t){return r("editor.uploadFile",e,t)}function I(e,t="info"){return r("editor.flashNotification",e,t)}function N(e,t,n="",o=""){return r("editor.filterBox",e,t,n,o)}function $(e,t,n,o=""){return r("editor.showPanel",e,t,n,o)}function j(e){return r("editor.hidePanel",e)}function q(e,t){return r("editor.insertAtPos",e,t)}function _(e,t,n){return r("editor.replaceRange",e,t,n)}function H(e,t=!1){return r("editor.moveCursor",e,t)}function z(e){return r("editor.insertAtCursor",e)}function G(e){return r("editor.dispatch",e)}function J(e,t=""){return r("editor.prompt",e,t)}function K(e){return r("editor.confirm",e)}function Q(e){return r("editor.getUiOption",e)}function V(e,t){return r("editor.setUiOption",e,t)}function X(e){return r("editor.vimEx",e)}function Y(){return r("editor.fold")}function Z(){return r("editor.unfold")}function ee(){return r("editor.toggleFold")}function te(){return r("editor.foldAll")}function re(){return r("editor.unfoldAll")}async function g(){await l.flashNotification("Hello world!")}var y={helloWorld:g},me={name:"tutorial",functions:{helloWorld:{path:"hello.ts:helloWorld",command:{name:"Tutorial: Say hello"}}},assets:{}};p(y,me);return v(pe);})();
