var mod=(()=>{var c=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var n in t)c(e,n,{get:t[n],enumerable:!0})},v=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of h(t))!b.call(e,i)&&i!==n&&c(e,i,{get:()=>t[i],enumerable:!(o=x(t,i))||o.enumerable});return e};var w=e=>v(c({},"__esModule",{value:!0}),e);var fe={};m(fe,{functionMapping:()=>P});typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var d=new Map,u=0;function l(e){self.postMessage(e)}self.syscall=async(e,...t)=>await new Promise((n,o)=>{u++,d.set(u,{resolve:n,reject:o}),l({type:"sys",id:u,name:e,args:t})});function p(e,t){self.addEventListener("message",n=>{(async()=>{let o=n.data;switch(o.type){case"inv":{let i=e[o.name];if(!i)throw new Error(`Function not loaded: ${o.name}`);try{let s=await Promise.resolve(i(...o.args||[]));l({type:"invr",id:o.id,result:s})}catch(s){console.error("An exception was thrown as a result of invoking function",o.name,"error:",s),l({type:"invr",id:o.id,error:s.message})}}break;case"sysr":{let i=o.id,s=d.get(i);if(!s)throw Error("Invalid request id");d.delete(i),o.error?s.reject(new Error(o.error)):s.resolve(o.result)}break}})().catch(console.error)}),l({type:"manifest",manifest:t})}function F(e){let t=atob(e),n=t.length,o=new Uint8Array(n);for(let i=0;i<n;i++)o[i]=t.charCodeAt(i);return o}function f(e){typeof e=="string"&&(e=new TextEncoder().encode(e));let t="",n=e.byteLength;for(let o=0;o<n;o++)t+=String.fromCharCode(e[o]);return btoa(t)}async function A(e,t){if(typeof e!="string"){let n=new Uint8Array(await e.arrayBuffer()),o=n.length>0?f(n):void 0;t={method:e.method,headers:Object.fromEntries(e.headers.entries()),base64Body:o},e=e.url}return syscall("sandboxFetch.fetch",e,t)}function M(){globalThis.nativeFetch=globalThis.fetch,globalThis.fetch=async function(e,t){let n=t&&t.body?f(new Uint8Array(await new Response(t.body).arrayBuffer())):void 0,o=await A(e,t&&{method:t.method,headers:t.headers,base64Body:n});return new Response(o.base64Body?F(o.base64Body):null,{status:o.status,headers:o.headers})}}M();var a={};m(a,{confirm:()=>Q,dispatch:()=>J,downloadFile:()=>j,filterBox:()=>I,flashNotification:()=>N,fold:()=>Z,foldAll:()=>re,getCurrentPage:()=>C,getCursor:()=>k,getSelection:()=>R,getText:()=>S,getUiOption:()=>V,hidePanel:()=>q,insertAtCursor:()=>G,insertAtPos:()=>_,moveCursor:()=>z,navigate:()=>W,openUrl:()=>O,prompt:()=>K,reloadPage:()=>B,reloadUI:()=>L,replaceRange:()=>H,save:()=>E,setPage:()=>U,setSelection:()=>T,setUiOption:()=>X,showPanel:()=>$,toggleFold:()=>te,unfold:()=>ee,unfoldAll:()=>oe,uploadFile:()=>D,vimEx:()=>Y});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});var r=self.syscall;function C(){return r("editor.getCurrentPage")}function U(e){return r("editor.setPage",e)}function S(){return r("editor.getText")}function k(){return r("editor.getCursor")}function R(){return r("editor.getSelection")}function T(e,t){return r("editor.setSelection",e,t)}function E(){return r("editor.save")}function W(e,t,n=!1,o=!1){return r("editor.navigate",e,t,n,o)}function B(){return r("editor.reloadPage")}function L(){return r("editor.reloadUI")}function O(e,t=!1){return r("editor.openUrl",e,t)}function j(e,t){return r("editor.downloadFile",e,t)}function D(e,t){return r("editor.uploadFile",e,t)}function N(e,t="info"){return r("editor.flashNotification",e,t)}function I(e,t,n="",o=""){return r("editor.filterBox",e,t,n,o)}function $(e,t,n,o=""){return r("editor.showPanel",e,t,n,o)}function q(e){return r("editor.hidePanel",e)}function _(e,t){return r("editor.insertAtPos",e,t)}function H(e,t,n){return r("editor.replaceRange",e,t,n)}function z(e,t=!1){return r("editor.moveCursor",e,t)}function G(e){return r("editor.insertAtCursor",e)}function J(e){return r("editor.dispatch",e)}function K(e,t=""){return r("editor.prompt",e,t)}function Q(e){return r("editor.confirm",e)}function V(e){return r("editor.getUiOption",e)}function X(e,t){return r("editor.setUiOption",e,t)}function Y(e){return r("editor.vimEx",e)}function Z(){return r("editor.fold")}function ee(){return r("editor.unfold")}function te(){return r("editor.toggleFold")}function re(){return r("editor.foldAll")}function oe(){return r("editor.unfoldAll")}async function g(){await a.flashNotification("Hello world!")}async function y(){let e=await fetch("https://jsonplaceholder.typicode.com/users/1");if(e.status<200||e.status>=300)throw new Error(await e.text());let t=await e.json();console.log(t),await a.flashNotification(t.name)}var P={helloWorld:g,randomUser:y},pe={name:"tutorial",requiredPermissions:["fetch"],functions:{helloWorld:{path:"tutorial.ts:helloWorld",command:{name:"Tutorial: Say hello"}},randomUser:{path:"tutorial.ts:randomUser",command:{name:"Tutorial: Show random user name"}}},assets:{}};p(P,pe);return w(fe);})();
